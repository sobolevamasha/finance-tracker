import{d as P,r as k,c as y,w as Q,a as b,b as I,o as f,e as t,t as m,f as U,n as w,g as x,v as D,h as W,F as M,i as R,s as X,u as Y,j as Z,k as tt,l as $}from"./index-Bgy70VQS.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N=P("transactions",()=>{const o=k([{id:1,amount:-1500,category:"food",description:"–û–±–µ–¥ –≤ –∫–∞—Ñ–µ",date:"2024-01-15"},{id:2,amount:5e4,category:"salary",description:"–ó–∞—Ä–ø–ª–∞—Ç–∞",date:"2024-01-10"},{id:3,amount:-300,category:"transport",description:"–¢–∞–∫—Å–∏",date:"2024-01-15"}]),T=i=>{o.value.push({id:Date.now(),...i})},u=i=>{o.value=o.value.filter(r=>r.id!==i)},_=y(()=>o.value.reduce((i,r)=>i+r.amount,0));return{transactions:o,addTransaction:T,deleteTransaction:u,updateTransaction:(i,r)=>{const v=o.value.findIndex(p=>p.id===i);v!==-1&&(o.value[v]={...o.value[v],...r})},getTransactionById:i=>o.value.find(r=>r.id===i),totalBalance:_}}),et={class:"transaction-form card"},at={class:"form-group"},st={class:"type-toggle"},nt={class:"form-group"},ot={class:"form-group"},lt=["value"],it={class:"form-group"},rt={class:"form-group"},ut={class:"form-actions"},ct={type:"submit",class:"btn btn--primary"},dt={__name:"TransactionForm",props:{visible:Boolean,editingTransaction:Object},emits:["close"],setup(o,{emit:T}){const u=o,_=T,h=N(),a=k({type:"expense",amount:"",category:"",description:"",date:new Date().toISOString().split("T")[0]}),i=y(()=>[{value:"food",label:"üçï –ï–¥–∞"},{value:"transport",label:"üöï –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç"},{value:"shopping",label:"üõçÔ∏è –®–æ–ø–ø–∏–Ω–≥"},{value:"entertainment",label:"üé¨ –†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è"},{value:"health",label:"üè• –ó–¥–æ—Ä–æ–≤—å–µ"},{value:"bills",label:"üè† –ö–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ"},{value:"salary",label:"üí∞ –ó–∞—Ä–ø–ª–∞—Ç–∞"},{value:"freelance",label:"üíº –§—Ä–∏–ª–∞–Ω—Å"},{value:"other",label:"üì¶ –î—Ä—É–≥–æ–µ"}]);Q(()=>u.editingTransaction,c=>{c?a.value={type:c.amount>0?"income":"expense",amount:Math.abs(c.amount),category:c.category,description:c.description,date:c.date}:r()});const r=()=>{a.value={type:"expense",amount:"",category:"",description:"",date:new Date().toISOString().split("T")[0]}},v=()=>{const e={amount:a.value.type==="income"?+a.value.amount:-Math.abs(+a.value.amount),category:a.value.category||"other",description:a.value.description||"–ë–µ–∑ –æ–ø–∏—Å–∞–Ω–∏—è",date:a.value.date};u.editingTransaction?h.updateTransaction(u.editingTransaction.id,e):h.addTransaction(e),p()},p=()=>{r(),_("close")};return(c,e)=>o.visible?(f(),b("div",{key:0,class:"transaction-form-overlay",onClick:U(p,["self"])},[t("div",et,[t("h2",null,m(o.editingTransaction?"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å":"–î–æ–±–∞–≤–∏—Ç—å")+" –æ–ø–µ—Ä–∞—Ü–∏—é",1),t("form",{onSubmit:U(v,["prevent"])},[t("div",at,[e[6]||(e[6]=t("label",{class:"form-label"},"–¢–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏",-1)),t("div",st,[t("button",{type:"button",class:w(["type-btn",{"type-btn--active":a.value.type==="income"}]),onClick:e[0]||(e[0]=l=>a.value.type="income")}," üì• –î–æ—Ö–æ–¥ ",2),t("button",{type:"button",class:w(["type-btn",{"type-btn--active":a.value.type==="expense"}]),onClick:e[1]||(e[1]=l=>a.value.type="expense")}," üì§ –†–∞—Å—Ö–æ–¥ ",2)])]),t("div",nt,[e[7]||(e[7]=t("label",{class:"form-label"},"–°—É–º–º–∞",-1)),x(t("input",{type:"number",class:"form-input",placeholder:"0","onUpdate:modelValue":e[2]||(e[2]=l=>a.value.amount=l),required:""},null,512),[[D,a.value.amount]])]),t("div",ot,[e[9]||(e[9]=t("label",{class:"form-label"},"–ö–∞—Ç–µ–≥–æ—Ä–∏—è",-1)),x(t("select",{class:"form-input","onUpdate:modelValue":e[3]||(e[3]=l=>a.value.category=l)},[e[8]||(e[8]=t("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é",-1)),(f(!0),b(M,null,R(i.value,l=>(f(),b("option",{key:l.value,value:l.value},m(l.label),9,lt))),128))],512),[[W,a.value.category]])]),t("div",it,[e[10]||(e[10]=t("label",{class:"form-label"},"–û–ø–∏—Å–∞–Ω–∏–µ",-1)),x(t("input",{type:"text",class:"form-input",placeholder:"–ù–∞–ø—Ä–∏–º–µ—Ä: –û–±–µ–¥ –≤ –∫–∞—Ñ–µ","onUpdate:modelValue":e[4]||(e[4]=l=>a.value.description=l)},null,512),[[D,a.value.description]])]),t("div",rt,[e[11]||(e[11]=t("label",{class:"form-label"},"–î–∞—Ç–∞",-1)),x(t("input",{type:"date",class:"form-input","onUpdate:modelValue":e[5]||(e[5]=l=>a.value.date=l)},null,512),[[D,a.value.date]])]),t("div",ut,[t("button",{type:"button",class:"btn btn--danger",onClick:p},"–û—Ç–º–µ–Ω–∞"),t("button",ct,m(o.editingTransaction?"–û–±–Ω–æ–≤–∏—Ç—å":"–î–æ–±–∞–≤–∏—Ç—å"),1)])],32)])])):I("",!0)}},mt=V(dt,[["__scopeId","data-v-db84e588"]]),vt={class:"container"},pt={key:0,class:"header"},bt={class:"user-info"},ft={key:1,class:"text-center"},gt={class:"balance-card"},yt={class:"stats-grid"},_t={class:"stat-card"},ht={class:"stat-amount text-success"},Tt={class:"stat-card"},xt={class:"stat-amount text-danger"},$t={class:"card"},kt={class:"card-header"},wt={class:"transactions-list"},Ct=["onClick"],Dt={class:"transaction-info"},It={class:"transaction-description"},St={class:"transaction-category"},Ft={class:"transaction-date"},Bt={key:0,class:"empty-state"},Ut={__name:"Dashboard",setup(o){const T=N(),{transactions:u,totalBalance:_}=X(T),{isTelegram:h,user:a,showMainButton:i,showAlert:r}=Y(),v=k(!1),p=k(null),c={food:"üçï –ï–¥–∞",transport:"üöï –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç",shopping:"üõçÔ∏è –®–æ–ø–ø–∏–Ω–≥",entertainment:"üé¨ –†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è",health:"üè• –ó–¥–æ—Ä–æ–≤—å–µ",bills:"üè† –ö–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ",salary:"üí∞ –ó–∞—Ä–ø–ª–∞—Ç–∞",freelance:"üíº –§—Ä–∏–ª–∞–Ω—Å",other:"üì¶ –î—Ä—É–≥–æ–µ"},e=y(()=>new Intl.NumberFormat("ru-RU").format(_.value)),l=y(()=>new Intl.NumberFormat("ru-RU").format(j.value)),L=y(()=>new Intl.NumberFormat("ru-RU").format(A.value)),O=y(()=>({"balance-amount--positive":_.value>=0,"balance-amount--negative":_.value<0})),j=y(()=>u.value.filter(s=>s.amount>0).reduce((s,n)=>s+n.amount,0)),A=y(()=>Math.abs(u.value.filter(s=>s.amount<0).reduce((s,n)=>s+n.amount,0))),E=y(()=>[...u.value].sort((s,n)=>new Date(n.date)-new Date(s.date)).slice(0,10)),S=()=>{p.value=null,v.value=!0},q=s=>{p.value=s,v.value=!0},z=()=>{v.value=!1,p.value=null},F=s=>c[s]||c.other,G=s=>({"transaction-amount--income":s.amount>0,"transaction-amount--expense":s.amount<0}),H=s=>`${s>0?"+":""}${new Intl.NumberFormat("ru-RU").format(s)} ‚ÇΩ`,J=s=>new Date(s).toLocaleDateString("ru-RU"),K=()=>{const n=["–î–∞—Ç–∞,–û–ø–∏—Å–∞–Ω–∏–µ,–ö–∞—Ç–µ–≥–æ—Ä–∏—è,–°—É–º–º–∞,–¢–∏–ø",...u.value.map(d=>({–î–∞—Ç–∞:d.date,–û–ø–∏—Å–∞–Ω–∏–µ:d.description,–ö–∞—Ç–µ–≥–æ—Ä–∏—è:F(d.category),–°—É–º–º–∞:d.amount,–¢–∏–ø:d.amount>0?"–î–æ—Ö–æ–¥":"–†–∞—Å—Ö–æ–¥"})).map(d=>`"${d.–î–∞—Ç–∞}","${d.–û–ø–∏—Å–∞–Ω–∏–µ}","${d.–ö–∞—Ç–µ–≥–æ—Ä–∏—è}",${d.–°—É–º–º–∞},"${d.–¢–∏–ø}"`)].join(`
`),g=new Blob([n],{type:"text/csv"}),B=URL.createObjectURL(g),C=document.createElement("a");C.href=B,C.download=`—Ñ–∏–Ω–∞–Ω—Å—ã_${new Date().toISOString().split("T")[0]}.csv`,C.click(),r("–î–∞–Ω–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ CSV —Ñ–∞–π–ª!")};return Z(()=>{h&&i("–î–æ–±–∞–≤–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é",S)}),(s,n)=>(f(),b("div",vt,[$(a)?(f(),b("div",pt,[n[0]||(n[0]=t("h1",null,"üí∞ –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –¢—Ä–µ–∫–µ—Ä",-1)),t("div",bt,[t("span",null,"–ü—Ä–∏–≤–µ—Ç, "+m($(a).first_name)+"!",1)])])):(f(),b("h1",ft,"üí∞ –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –¢—Ä–µ–∫–µ—Ä")),t("div",gt,[n[1]||(n[1]=t("div",{class:"balance-label"},"–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å",-1)),t("div",{class:w(["balance-amount",O.value])},m(e.value),3)]),t("div",yt,[t("div",_t,[n[2]||(n[2]=t("div",{class:"stat-label"},"–î–æ—Ö–æ–¥—ã",-1)),t("div",ht,"+"+m(l.value)+" ‚ÇΩ",1)]),t("div",Tt,[n[3]||(n[3]=t("div",{class:"stat-label"},"–†–∞—Å—Ö–æ–¥—ã",-1)),t("div",xt,"-"+m(L.value)+" ‚ÇΩ",1)])]),t("button",{class:"btn btn--primary btn--block btn--lg",onClick:S}," + –î–æ–±–∞–≤–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é "),t("div",$t,[t("div",kt,[n[4]||(n[4]=t("h3",null,"–ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏",-1)),$(h)?(f(),b("button",{key:0,class:"btn btn--text",onClick:K}," üì§ –≠–∫—Å–ø–æ—Ä—Ç ")):I("",!0)]),t("div",wt,[(f(!0),b(M,null,R(E.value,g=>(f(),b("div",{key:g.id,class:"transaction-item list-item--interactive",onClick:B=>q(g)},[t("div",Dt,[t("div",It,m(g.description),1),t("div",St,m(F(g.category)),1),t("div",Ft,m(J(g.date)),1)]),t("div",{class:w(["transaction-amount",G(g)])},m(H(g.amount)),3)],8,Ct))),128)),$(u).length===0?(f(),b("div",Bt,[...n[5]||(n[5]=[t("p",null,"üìù –ü–æ–∫–∞ –Ω–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–π",-1),t("p",{class:"text-muted"},"–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—É—é –æ–ø–µ—Ä–∞—Ü–∏—é!",-1)])])):I("",!0)])]),tt(mt,{visible:v.value,"editing-transaction":p.value,onClose:z},null,8,["visible","editing-transaction"])]))}},Vt=V(Ut,[["__scopeId","data-v-b7834c71"]]);export{Vt as default};
